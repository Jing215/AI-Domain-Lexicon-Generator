# 対話型AIの応答忠実性向上を目的とした専門用語辞書自動構築システム

## 概要 (Overview)

本プロジェクトは、ChatPDFのような汎用対話型AIが専門文書を扱う際に生じる「忠実性(Faithfulness)」の課題を解決するためのシステムです。AIが文書外の知識で応答するリスクに対し、AIの応答を文書内容に「固定(Grounding)」させるための**専門用語辞書（ガイド役）**を、与えられたPDFから自動構築します。

## 背景と課題 (Background & Problem)

近年の大規模言語モデル(LLM)は非常に高性能で、専門的な質問にも的確に応答するように見えます。しかし、実験を通じて、LLMは与えられた文書に書かれていない内容でも、自身の広範な事前学習知識を基に**完璧な回答を生成してしまう**という、見過ごされがちなリスクが明らかになりました。

これは一見すると優れていますが、以下の深刻な問題を引き起こす可能性があります。
- **文脈の無視:** 文書独自の定義やニュアンスを無視し、一般論で応答してしまう。
- **ハルシネーション（幻覚）:** 内部知識が不正確な場合、もっともらしい虚偽情報を生成する。
- **焦点の欠如:** 文書独自のニッチな情報に対する重要性を認識できない。

本研究は、この「賢すぎるAI」を、より**信頼でき、制御可能なパートナーにする**ために始まりました。

## システムの特徴 (Features)

- **意味的類似度に基づく抽出:** `KeyBERT (Sentence-BERT)`を用い、文書全体のテーマと意味的に最も関連性の高い用語を抽出します。
- **高品質化のための複合的アプローチ:**
    1.  **ノイズ除去:** `PyMuPDF`と`正規表現`による徹底的なテキストクリーニング。
    2.  **粒度調整:** 意味のある複合語（2-3語）のみを対象とし、無意味な単語を排除。
    3.  **多様性確保:** `MMR (Maximal Marginal Relevance)`アルゴリズムにより、特定のトピックに偏らないバランスの取れた抽出を実現。
    4.  **専門家による補完:** AIが見逃しがちな基礎的用語を人間が補完する`Human-in-the-Loop`の仕組みを導入。
- **再現性:** このリポジトリと必要なライブラリがあれば、誰でも結果を再現可能です。

## 使用技術 (Technology Stack)
- **言語:** Python
- **主要ライブラリ:** 
    - `keybert`
    - `sentence-transformers` (all-MiniLM-L6-v2)
    - `PyMuPDF`
    - `scikit-learn` (MMRで使用)
    - `numpy`, `pandas`
- **その他:** Git, GitHub, 正規表現

## 使い方 (Usage)

### 1. リポジトリをクローン
```bash
git clone https://github.com/Jing215/AI-Domain-Lexicon-Generator.git
cd AI-Domain-Lexicon-Generator
```

### 2. 必要なライブラリをインストール
```bash
pip install -r requirements.txt
```

### 3. PDFファイルを配置
`data/` ディレクトリ内に、分析したいPDFファイルを配置してください。
*(注: 著作権保護されたPDFの配布は意図していません。ご自身で利用権を持つファイルを使用してください。)*

### 4. スクリプトを実行
改良版(v2.0)のスクリプトを実行します。
```bash
python main.py
```
比較のため、初期版(v1.0)を実行することもできます。
```bash
python main_v1.py
```

### 5. 結果の確認
処理が完了すると、`output/` ディレクトリに結果のテキストファイルが生成されます。
- `electrical_vocab_final.txt` (v2.0の結果)
- `electrical_vocab_v1_naive.txt` (v1.0の結果)

## 実験結果と考察 (Results & Discussion)

本アプローチの有効性を確認するため、手法改善前(v1.0)と改善後(v2.0)で抽出結果を比較しました。

- **v1.0 (初期アプローチ):** `of electrical engineering` のような意味のないフレーズが上位を占め、辞書として機能しませんでした。これは、データの前処理や抽出ルールの欠如が原因でした。
- **v2.0 (改良アプローチ):** `harmonic distortion signals`, `kvl know` といった質の高い専門用語の抽出に成功しました。これは、本READMEで述べた複合的アプローチの有効性を示しています。

特に注目すべきのは、モデルが`kvl`という略語は抽出できたものの、その正式名称である`Kirchhoff's Laws`を見逃した点です。これは、自動抽出の限界を示すと同時に、専門家による最終補完プロセスの重要性を裏付ける結果となりました。

## 今後の展望 (Future Work)

現在は用語リストの生成に留まっていますが、将来的には用語間の関係性（例: `is part of`, `causes`）を抽出する**知識グラフ(Knowledge Graph)**の構築を目指します。これにより、AIが単語の重要性だけでなく、その構造的な意味まで理解し、より高度な推論に基づいた応答が可能になると考えています。

## ライセンス (License)
このプロジェクトはMITライセンスの下で公開されています。詳細は `LICENSE` ファイルをご覧ください。
